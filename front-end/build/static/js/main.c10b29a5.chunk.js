(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{160:function(e,t,a){e.exports=a(321)},168:function(e,t){},170:function(e,t){},209:function(e,t){},210:function(e,t){},266:function(e,t,a){},319:function(e,t,a){},321:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(22),l=a.n(s),o=a(62),c=a(41),i=a.n(c),u=(a(266),a(30)),m=a(34),p=a(6),d=a(5),f=a(13),h=a(9),g=a(14),E=a(15),v=a(16),b=a(19),y=a.n(b),O=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).renderPagination=function(){for(var e=[],t=0;t<=a.data.length-1;t++){var n=t===a.state.pagination?"active":"";e.push(r.a.createElement(p.a,{key:"circle".concat(t),className:n,icon:d.j}))}return e},a.increasePagination=function(){var e=a.state.pagination<a.data.length-1?a.state.pagination+1:0;a.setState({pagination:e})},a.decreasePagination=function(){var e=a.state.pagination>0?a.state.pagination-1:a.data.length-1;a.setState({pagination:e})},a.state={pagination:0},a.data=[r.a.createElement("div",{key:"data1"},r.a.createElement(y.a,null,r.a.createElement("h1",null,"Introduction"),r.a.createElement("p",null,"This website allows you, the user, to report any local issues you have discovered so that they can be identified and promptly dealt with."))),r.a.createElement("div",{key:"data2"},r.a.createElement(y.a,null,r.a.createElement("h1",null,"Found an Issue?"),r.a.createElement("p",null,"Have you found an issue? Report it ",r.a.createElement("a",{href:"/issues/report"},"HERE!")))),r.a.createElement("div",{key:"data3"},r.a.createElement(y.a,null,r.a.createElement("h1",null,"Looking for local issues?"),r.a.createElement("p",null,"If you are looking for local issues in your area, click ",r.a.createElement("a",{href:"/issues"},"HERE!"))))],a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){document.title=this.props.title}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"section shadow h-centered-margin"},r.a.createElement("div",{className:"ccentered relative padding-20"},this.data[this.state.pagination],r.a.createElement("div",{className:"page-circles"},r.a.createElement(p.a,{className:"arrow",icon:d.g,onClick:function(){return e.decreasePagination()}}),this.renderPagination(),r.a.createElement(p.a,{className:"arrow",icon:d.h,onClick:function(){return e.increasePagination()}})))))}}]),t}(n.Component),N=a(10),w=a(27),j=a.n(w),S="http://localhost:8080/issues",k=function(e){var t="".concat(S,"/report");return j.a.post(t,e).then((function(e){return e})).catch((function(e){throw e.response}))},I=function(e,t){var a="".concat(S,"/upvote"),n={id:e,username:t};return j.a.post(a,n).then((function(e){return e.data})).catch((function(e){throw e.response}))},C=function(e,t){var a="".concat(S,"/downvote"),n={id:e,username:t};return j.a.post(a,n).then((function(e){return e.data})).catch((function(e){throw e.response}))},P=function(){var e="".concat(S,"/joblist");return j.a.get(e,{responseType:"blob"}).then((function(e){return e})).catch((function(e){throw e.response}))},D={fetchAllIssues:function(){var e="".concat(S,"/fetch");return j.a.get(e).then((function(e){return e.data})).catch((function(e){throw e.response}))},reportIssue:k,updateIssuePriority:function(e,t){var a="".concat(S,"/update/priority/").concat(e);return j.a.put(a,{priority:t}).then((function(e){return e})).catch((function(e){throw e.response}))},updateIssueStatus:function(e,t){var a="".concat(S,"/update/status/").concat(e);return j.a.put(a,{status:t}).then((function(e){return e})).catch((function(e){throw e.response}))},voteForIssue:I,voteAgainstIssue:C,fetchJobSheet:P,filterIssues:function(e,t){if(!e.length)throw new Error("No issues available");for(var a=e,n=function(){var n=s[r];"Select..."!==t[n]&&Object.keys(e[0]).indexOf(n)>=0&&(a=a.filter((function(e){return e[n].toString()===t[n].toString()})))},r=0,s=Object.keys(t);r<s.length;r++)n();return a},splitIssues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if(!e)throw new Error("No issues available");for(var a=[],n=0;n<=e.length;n+=t){var r=e.slice(n,n+t);a.push(r)}return a}},M=function(e){return e*(Math.PI/180)},x=function(){alert("There was an error or your request timed out.")},L={distance:function(e,t,a,n){var r=M(a-e),s=M(n-t),l=Math.sin(r/2)*Math.sin(r/2)+Math.cos(M(e))*Math.cos(M(a))*Math.sin(s/2)*Math.sin(s/2);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},getCurrentLocation:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,a={enableHighAccuracy:!0,timeout:1e4,maximumAge:0};navigator.geolocation&&navigator.geolocation.getCurrentPosition(e,t,a)}},R=a(8),T=function(e){var t=e.initialValue,a=e.options,s=e.changeCallback,l=e.id,o=e.defaultValue,c=Object(n.useState)(o||t),i=Object(R.a)(c,2),u=i[0],m=i[1];return r.a.createElement("select",{className:"",value:u,onChange:function(e){var t=e.target.value;m(t),s&&s(l,t)}},(o&&(a=[{value:null,label:"Select..."}].concat(a)),a.map((function(e,t){return r.a.createElement("option",{key:"".concat(l,"option").concat(t),value:e.value},e.label)}))))},A=[{value:"reported",label:"reported"},{value:"allocated",label:"allocated"},{value:"resolved",label:"resolved"}],F=[{value:"pending",label:"pending"},{value:"reported",label:"reported"},{value:"allocated",label:"allocated"},{value:"resolved",label:"resolved"}],U=[{value:void 0,label:"0"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"}],_=function(e){var t=e.filterCallback,a=e.isAdmin,s=Object(n.useState)({}),l=Object(R.a)(s,2),o=l[0],c=l[1],i=a?F:A,u=function(e,a){var n=o;n[e]=a,c(n),t(n)};return r.a.createElement("div",{className:"filter-bar flex-50 gap-right"},r.a.createElement("p",{className:"panel-header"},r.a.createElement(p.a,{icon:d.m}),"Filter - ",r.a.createElement("span",{className:"link",onClick:function(){return c({}),void t({})}},"Reset Filter")),r.a.createElement("div",{className:"filter-container"},r.a.createElement("div",{className:"item"},r.a.createElement("span",null,"Status"),r.a.createElement(T,{options:i,id:"status",initialValue:o.status,changeCallback:u,defaultValue:!0})),r.a.createElement("div",{className:"item"},r.a.createElement("span",null,"Priority"),r.a.createElement(T,{options:U,id:"priority",initialValue:o.priority,changeCallback:u,defaultValue:!0}))))},V=a(44),q=a.n(V),B={difference:function(e,t){return q.a.checkUndefinedParams({date1:e,date2:t}),q.a.validateDate(e),q.a.validateDate(t),e=new Date(e),t=new Date(t),e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),t=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),Math.abs(e-t)},timestampDays:function(e){return q.a.checkUndefinedParams({timestamp:e}),q.a.validateTimestamp(e),Math.floor(e/864e5)}};function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(a,!0).forEach((function(t){Object(N.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var J=function(e){var t=e.store,a=e.stateIssue,n=e.setStateIssue,s=function(){alert("Thank you for voting for the issue #".concat(a.id,"!"))},l=function(){alert("Sorry, you cannot vote for issue #".concat(a.id,"... \nIf you wish to change your vote, simply vote for the other option."))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Think this issue is ",r.a.createElement("b",null,"important?")," Vote for it!"),r.a.createElement("div",{className:"gap-left inline"},r.a.createElement("button",{onClick:function(){I(a.id,t.getState().userReducer.user.username).then((function(e){return n(H({},a,{votes:e}))})).then((function(){return s()})).catch((function(){return l()}))},className:"upvote"},r.a.createElement(p.a,{icon:d.b})),r.a.createElement("button",{onClick:function(){C(a.id,t.getState().userReducer.user.username).then((function(e){return n(H({},a,{votes:e}))})).then((function(){return s()})).catch((function(){return l()}))},className:"downvote"},r.a.createElement(p.a,{icon:d.a}))))},z=function(e){var t=e.issue,a=e.store,s=Object(n.useState)(t),l=Object(R.a)(s,2),o=l[0],c=l[1],i=new Date(o.dateSubmitted);i="".concat(i.getDate(),"/").concat(i.getMonth(),"/").concat(i.getFullYear());var u,m,f=o.streetName?o.streetName:"N/A",h=o.dateResolved?o.dateResolved:Date.now(),g=B.timestampDays(B.difference(o.dateSubmitted,h));switch(t.status){case"reported":u={backgroundColor:"#eb6060",color:"whitesmoke"},m=d.n;break;case"allocated":u={backgroundColor:"#f7e463",color:"#222222"},m=d.k;break;case"resolved":u={backgroundColor:"#7cd992",color:"whitesmoke"},m=d.d}return r.a.createElement(y.a,null,r.a.createElement("div",{key:o.id,className:"issue-card shadow"},r.a.createElement("div",{style:u,className:"title"},r.a.createElement(p.a,{icon:m}),r.a.createElement("span",null,"#",o.id," Status: ",o.status," - Votes: ",o.votes)),r.a.createElement("ul",{className:"details"},r.a.createElement("li",null,r.a.createElement("span",{className:"type"},"Description"),r.a.createElement("p",null,o.description)),r.a.createElement("li",null,r.a.createElement("span",{className:"type"},"Type"),r.a.createElement("p",null,o.type)),r.a.createElement("li",null,r.a.createElement("span",{className:"type"},"Date Reported"),r.a.createElement("p",null,i),r.a.createElement("span",{className:"type"},"Time Elapsed"),r.a.createElement("p",null,g," day(s)")),r.a.createElement("li",null,r.a.createElement("span",{className:"type"},"Location"),r.a.createElement("p",null,"Lat: ",o.lat.toFixed(5)),r.a.createElement("p",null,"Lng: ",o.lng.toFixed(5))),r.a.createElement("li",null,r.a.createElement("span",{className:"type"},"Street Name"),r.a.createElement("p",null,f)),r.a.createElement("li",null,r.a.createElement("span",{className:"type"},"Status"),r.a.createElement("p",null,o.status)),r.a.createElement("li",null,r.a.createElement("span",{className:"type"},"Priority"),r.a.createElement("p",null,o.priority)),o.distance?r.a.createElement("li",null,r.a.createElement("span",{className:"type"},"Distance from Current Location"),r.a.createElement("p",null,o.distance," KM")):null),r.a.createElement("div",{className:"gap-left inline vote w-100"},"reported"===o.status?r.a.createElement(J,{store:a,setStateIssue:c,stateIssue:o}):r.a.createElement("span",null,"Voting for this issue has been ",r.a.createElement("b",null,"closed."))),r.a.createElement("div",{className:"inline user"},r.a.createElement("em",null,"Issue reported by: ",o.username))))},X=function(e){var t=e.issues,a=e.numIssues,n=e.store,s=e.toggleMap;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"panel-header relative"},r.a.createElement(p.a,{icon:d.p}),"Issues -",r.a.createElement("span",{className:"link",onClick:s}," View on Map"),r.a.createElement("span",{className:"sub abs-right"},"Displaying ",a," Issues")),t?r.a.createElement("div",{className:"issue-list"},t.map((function(e,t){return r.a.createElement(z,{key:e.id,store:n,issue:e})}))):null)},W=function(e){for(var t=e.pagination,a=e.numberOfPages,n=e.setPagination,s=[],l=t+1>=a?a-1:t+1,o=function(e){var a=e===t?"item active":"item";s.push(r.a.createElement("button",{className:a,key:"btn_page".concat(e),onClick:function(){return t=e,window.scrollTo(0,0),void n(t);var t}},e))},c=t-1<0?0:t-1;c<=l;c++)o(c);return r.a.createElement("div",{className:"pagination"},s)},Y=a(153),K=a.n(Y),Q=function(e){var t,a=e.issue,n=e.onClick,s="white";switch(a.status){case"reported":t="#eb6060";break;case"allocated":t="#f7e463",s="#222222";break;case"resolved":t="#7cd992"}var l={backgroundColor:t,color:s};return r.a.createElement("div",{onClick:n,className:"pin",style:l},a.id)},Z=function(e){var t=new Date(e.issue.dateSubmitted).toLocaleDateString();return r.a.createElement("div",{className:"info-box shadow"},r.a.createElement("div",null,r.a.createElement("b",null,"Status"),": ",e.issue.status),r.a.createElement("div",null,r.a.createElement("b",null,"Date Reported"),": ",t),r.a.createElement("div",{style:{display:"block",paddingTop:"10px"}},"Click for more details!"))},$=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(s)))).state={issue:{},lat:"",lng:"",zoom:a.props.zoom,hover:!1,clicked:!1,currentPosition:!1,infoBox:!1,height:a.props.height?a.props.height:"350px"},a.renderMarkers=function(){return a.props.issues.map((function(e){return r.a.createElement(Q,{key:"marker".concat(e.id),lat:e.lat,lng:e.lng,issue:e,hover:a.state.hover,onClick:function(){return a.onClick()}})}))},a.onChildMouseEnter=function(e,t){if(void 0===t.issue)return null;a.setState({issue:t.issue,lat:t.lat,lng:t.lng,hover:!0})},a.onChildMouseLeave=function(e,t){if(void 0===t.issue)return null;a.setState({issue:{},lat:"",lng:"",hover:!1})},a.onClick=function(){a.setState({clicked:!a.state.clicked}),a.props.onMapClick(a.state.issue)},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state.hover?r.a.createElement(Z,{lat:this.state.lat,lng:this.state.lng,issue:this.state.issue}):null;return r.a.createElement("div",{style:{height:this.state.height,width:"100%"}},r.a.createElement(K.a,{bootstrapURLKeys:{key:"AIzaSyAjld9X9LpHG8qabXQAG95iwU_YWTQ9ej0"},defaultCenter:this.props.center,defaultZoom:this.props.zoom,center:this.props.userLocation,onChildMouseEnter:this.onChildMouseEnter,onChildMouseLeave:this.onChildMouseLeave,onClick:this.props.onClick},this.props.issues?this.renderMarkers():null,e,this.props.singleMarker,this.props.currentMarker))}}]),t}(n.Component);$.defaultProps={center:{lat:40.73,lng:-73.93},zoom:12};var ee=$,te=function(e){var t=e.issue,a=e.close;return r.a.createElement(y.a,null,r.a.createElement("div",{className:"issue-panel flex-25 border-box padding-10 shadow gap-left anim-all-200"},r.a.createElement("h1",null,"Issue Details"),r.a.createElement("ul",null,r.a.createElement("li",null,"Ref. No: ",t.id),r.a.createElement("li",null,"Community Votes: ",t.votes),r.a.createElement("li",null,"Status: ",t.status),r.a.createElement("li",null,"Priority: ",t.priority),r.a.createElement("li",null,"Status: ",t.status),r.a.createElement("li",null,"Description: ",t.description),r.a.createElement("li",null,"Date Reported: ",t.dateSubmitted),r.a.createElement("li",null,"Distance from you: ",t.distance,"KM"),r.a.createElement("li",null,"Coordinates: ",r.a.createElement("ul",{style:{marginTop:"1em"}},r.a.createElement("li",null,"[LAT] ",t.lat),r.a.createElement("li",null,"[LNG] ",t.lng))),r.a.createElement("li",null,"Reported By: ",t.username)),r.a.createElement("span",{className:"close",onClick:a},r.a.createElement(p.a,{icon:d.s}))))};function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ne=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).componentDidMount=function(){a.setState({loadMessage:"Fetching issues..."}),D.fetchAllIssues().then((function(e){var t=e.filter((function(e){return"pending"!==e.status}));a.setState({rawIssues:t,numIssues:t.length}),a.calcIssueDistance()})).catch((function(e){return console.log(e)}))},a.renderIssues=function(e){var t=D.splitIssues(e,a.state.rpp);a.setState({issues:t})},a.filterIssues=function(e){var t=D.filterIssues(a.state.rawIssues,e);a.setState({pagination:0,numIssues:t.length}),a.renderIssues(t)},a.compareDistance=function(e,t){return e.distance<t.distance?-1:e.distance>t.distance?1:0},a.success=function(e){var t=e.coords,n=a.state.rawIssues.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(a,!0).forEach((function(t){Object(N.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{distance:L.distance(t.latitude,t.longitude,e.lat,e.lng).toFixed(2)})})).sort(a.compareDistance);a.setState({rawIssues:n,userLocation:t}),a.renderIssues(n)},a.calcIssueDistance=function(){a.setState({loadMessage:"Calculating distance from location..."}),L.getCurrentLocation(a.success)},a.onMapClick=function(e){a.setState({mapIssue:e})},a.closeIssuePanel=function(){a.setState({mapIssue:{}})},a.toggleMap=function(){document.getElementById("map").classList.toggle("hidden")},a.state={issues:null,rawIssues:null,numIssues:0,rpp:5,pagination:0,loadMessage:"Loading...",userLocation:{},mapIssue:{},showMap:!1},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.issues?r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{filterCallback:this.filterIssues,isAdmin:!1}),r.a.createElement("div",{id:"map",className:"flex hidden"},r.a.createElement("div",{className:this.state.mapIssue.id?"flex-70 flex-no-grow anim-all-400":"flex-70 flex-grow anim-all-400"},r.a.createElement(ee,{onMapClick:function(t){return e.onMapClick(t)},userLocation:[this.state.userLocation.latitude,this.state.userLocation.longitude],zoom:9,issues:this.state.rawIssues})),this.state.mapIssue.id?r.a.createElement(te,{issue:this.state.mapIssue,close:function(){return e.closeIssuePanel()}}):null),r.a.createElement("div",null,r.a.createElement(X,{toggleMap:function(){return e.toggleMap()},issues:this.state.issues[this.state.pagination],numIssues:this.state.numIssues,store:this.props.store}),r.a.createElement(W,{pagination:this.state.pagination,numberOfPages:this.state.issues.length,setPagination:function(t){e.setState({pagination:t})}}))):r.a.createElement("div",{className:"loading-blocked"},r.a.createElement("span",null,this.state.loadMessage)))}}]),t}(n.Component),re=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){document.title=this.props.title}},{key:"render",value:function(){return r.a.createElement("div",{className:"fill gap-bot shadow"},r.a.createElement("h1",null,"Reported Issues"),r.a.createElement(ne,{store:this.props.store}))}}]),t}(n.Component),se=a(52),le=a.n(se),oe=a(84),ce=function(e){var t="".concat("http://localhost:8080/user","/register");return j.a.post(t,e).then((function(e){return e.data.token})).catch((function(e){throw e.response}))},ie=function(){var e=Object(oe.a)(le.a.mark((function e(t,a){var n,r;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("http://localhost:8080/user","/login"),r={user:t,pass:a},e.abrupt("return",j.a.post(n,r).then((function(e){return e.data.token})).catch((function(e){throw e.response})));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ue={login:ie,register:ce,sendEmail:function(){var e=Object(oe.a)(le.a.mark((function e(t){var a;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("http://localhost:8080/user","/message"),e.abrupt("return",j.a.post(a,t).then((function(e){return e})).catch((function(e){throw e.response})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},me=a(338),pe=function(e){var t=e.issues,a=e.numIssues;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"panel-header relative"},r.a.createElement(p.a,{icon:d.r}),"Issues",r.a.createElement("span",{className:"sub abs-right"},"Found ",a," results")),r.a.createElement("div",{className:"table-container yscroll"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(me.a,{placement:"top",title:"Unique value provided as a reference key for the issue."},r.a.createElement("span",null,"Issue Ref."))),r.a.createElement("th",null,r.a.createElement(me.a,{placement:"top",title:"Category the issue falls under."},r.a.createElement("span",null,"Type"))),r.a.createElement("th",null,r.a.createElement(me.a,{placement:"top",title:"Description of the issue provided by the user."},r.a.createElement("span",null,"Description"))),r.a.createElement("th",null,r.a.createElement(me.a,{placement:"top",title:"Number of relative votes this issue has received."},r.a.createElement("span",null,"Votes Received"))),r.a.createElement("th",null,r.a.createElement(me.a,{placement:"top",title:"The date the issue was reported."},r.a.createElement("span",null,"Date Reported"))),r.a.createElement("th",null,r.a.createElement(me.a,{placement:"top",title:"Time Elapsed since the issue was reported or resolved."},r.a.createElement("span",null,"Days Elapsed"))),r.a.createElement("th",null,r.a.createElement(me.a,{placement:"top",title:"Latitude and Longitude coordinates of the issue."},r.a.createElement("span",null," (Lat,Lng)"))),r.a.createElement("th",null,r.a.createElement(me.a,{placement:"top",title:"Name of the (closest) street at the provided location."},r.a.createElement("span",null,"Street Name"))),r.a.createElement("th",null,r.a.createElement(me.a,{placement:"top",title:"Name of the user who reported the issue."},r.a.createElement("span",null,"Reported By"))),r.a.createElement("th",null,r.a.createElement(me.a,{placement:"top",title:"Current status of the issue."},r.a.createElement("span",null,"Status"))),r.a.createElement("th",null,r.a.createElement(me.a,{placement:"top",title:"Priority assigned to the issue by staff. 0 Priority represents priority for that issue has not been assigned."},r.a.createElement("span",null,"Priority"))))),r.a.createElement("tbody",null,t))))},de=a(155),fe=function(e){return r.a.createElement("div",{className:"flex-30"},r.a.createElement("p",{className:"panel-header"},r.a.createElement(p.a,{icon:d.l}),"Admin Panel"),r.a.createElement("span",null,"Generate a list of jobs that have been allocated and require resolution."),r.a.createElement("button",{onClick:function(){P().then((function(e){return new Blob([e.data],{type:"application/pdf"})})).then((function(e){return Object(de.saveAs)(e,"joblist.pdf")})).catch((function(e){return console.log(e)}))},className:"btn gap-top"},"Generate Job Sheet"))},he=function(e){var t=e.suggestions,a=Object(n.useState)(!0),s=Object(R.a)(a,2),l=s[0],o=s[1],c=Object(n.useState)("250px"),i=Object(R.a)(c,2),u=i[0],m=i[1],f=Object(n.useState)(d.i),h=Object(R.a)(f,2),g=h[0],E=h[1];return r.a.createElement("div",{className:"suggestion-box",style:{height:u}},r.a.createElement("p",{className:"title panel-header"},"Issue Suggestions",r.a.createElement("span",{style:{fontWeight:"normal"}}," - These issues are ",r.a.createElement("b",null,"recommened")," based on distance from the last allocated issue and then sorted by number of user votes."),r.a.createElement(p.a,{icon:g,onClick:function(){return o(!l),void(l?(m("20px"),E(d.f)):(m("250px"),E(d.i)))}})),l?t:null)},ge=function(e){var t=e.issue,a=e.allocateClick,n=e.mostImportant,s=new Date(t.dateSubmitted).toDateString();return r.a.createElement(y.a,null,r.a.createElement("div",{className:"suggestion shadow"},r.a.createElement("div",{className:"head"},n?"[BEST] - ":null,"Issue Ref. #",t.id," - Votes ",t.votes),r.a.createElement("div",{className:"content"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("b",null,"Type"),": ",t.type),r.a.createElement("li",null,r.a.createElement("b",null,"Status"),": ",t.status),r.a.createElement("li",null,r.a.createElement("b",null,"Date Reported"),": ",s),r.a.createElement("li",null,r.a.createElement("b",null,"Distance"),": ",t.distance.toFixed(2),"KM")),r.a.createElement("button",{onClick:a},"Allocate"))))};function Ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ve=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).componentDidMount=function(){a.refreshIssueList()},a.compareUserVotes=function(e,t){return e.votes>t.votes?-1:e.votes<t.votes?1:0},a.setIssuePriority=function(e,t){D.updateIssuePriority(e,t).then((function(){return a.refreshIssueList()})).catch((function(e){return console.log(e)}))},a.tableSetIssueStatus=function(e,t){a.setIssueStatus(e,t),"allocated"===t?a.makeIssueSuggestion(e):a.setState({suggestions:[]})},a.setIssueStatus=function(e,t){D.updateIssueStatus(e,t).then((function(){return a.refreshIssueList()})).then((function(){var n=a.props.store.getState().userReducer.user.username,r="<p>Issue Ref. #".concat(e," status has been updated to ").concat(t,".\n                <a href='localhost:3000/issues'>Click Here</a> to view your updated issues </p>");ue.sendEmail({user:n,subject:"Reported Issue Status UPDATE",message:r})})).then((function(){return a.props.createNotification("Issue ".concat(e," has been updated to ").concat(t,"."))})).catch((function(e){return console.log(e)}))},a.filterIssues=function(e){var t=D.filterIssues(a.state.rawIssues,e);a.setState({currentFilter:e,pagination:0,numIssues:t.length}),a.sortByUserVotes(t)},a.refreshIssueList=function(){D.fetchAllIssues().then((function(e){var t=e;a.setState({rawIssues:t,numIssues:t.length}),a.filterIssues(a.state.currentFilter)})).catch((function(e){return console.log(e)}))},a.sortByUserVotes=function(e){var t=e.sort(a.compareUserVotes);a.renderIssues(t)},a.renderIssues=function(e){var t=e.map((function(e){var t=r.a.createElement("div",{className:"description"},e.description),n=new Date(e.dateSubmitted);n="".concat(n.getDate(),"/").concat(n.getMonth(),"/").concat(n.getFullYear());var s=e.dateResolved?e.dateResolved:Date.now(),l=B.timestampDays(B.difference(e.dateSubmitted,s)),o="".concat(e.lat.toFixed(2),",").concat(e.lng.toFixed(2)),c=e.streetName?e.streetName:"-";return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.type),r.a.createElement("td",null,t),r.a.createElement("td",null,e.votes),r.a.createElement("td",null,n),r.a.createElement("td",null,l),r.a.createElement("td",null,o),r.a.createElement("td",null,c),r.a.createElement("td",null,e.username),r.a.createElement("td",null,r.a.createElement(T,{initialValue:e.status,options:F,id:e.id,changeCallback:a.tableSetIssueStatus})),r.a.createElement("td",null,r.a.createElement(T,{initialValue:e.priority?e.priority:void 0,options:U,id:e.id,changeCallback:a.setIssuePriority})))})),n=D.splitIssues(t,a.state.rpp);a.setState({issues:n})},a.makeIssueSuggestion=function(e){var t=a.state.rawIssues.filter((function(t){return t.id===e}))[0],n=a.state.rawIssues.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ee(a,!0).forEach((function(t){Object(N.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ee(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{distance:L.distance(t.lat,t.lng,e.lat,e.lng)})})).filter((function(e){return e.id!==t.id&&"reported"===e.status&&e.distance<=a.state.suggestionRange}));if(n.length>0){var r=n.sort(a.compareUserVotes);a.setState({suggestions:r})}else a.setState({suggestions:[]}),alert("There were no suggestions to be made.")},a.suggestionAllocation=function(e){var t=a.state.suggestions.filter((function(t){return t.id!==e}));a.setState({suggestions:t}),a.setIssueStatus(e,"allocated")},a.renderSuggestions=function(){for(var e=[],t=a.state.suggestions.length<4?a.state.suggestions.length:4,n=function(t){e.push(r.a.createElement(ge,{mostImportant:0===t,key:"suggestion".concat(t),issue:a.state.suggestions[t],allocateClick:function(){return a.suggestionAllocation(a.state.suggestions[t].id)}}))},s=0;s<t;s++)n(s);return e},a.state={issues:null,rawIssues:null,numIssues:0,rpp:15,pagination:0,currentFilter:{},suggestions:[],suggestionRange:1},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.issues?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex"},r.a.createElement(_,{filterCallback:this.filterIssues,isAdmin:!0}),r.a.createElement(fe,null)),this.state.suggestions.length>0?r.a.createElement(he,{suggestions:this.renderSuggestions()}):null,r.a.createElement("div",null,r.a.createElement(pe,{issues:this.state.issues[this.state.pagination],numIssues:this.state.numIssues}),r.a.createElement(W,{pagination:this.state.pagination,numberOfPages:this.state.issues.length,setPagination:function(t){e.setState({pagination:t})}}))):r.a.createElement("p",null,"Loading Issues   ..."))}}]),t}(n.Component),be=function(e){var t=e.content,a=e.close;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"loading-blocked"}),r.a.createElement("div",{className:"popup shadow"},t,r.a.createElement("span",{className:"close link",onClick:a},"Close")))},ye=function(e){var t=e.message;return r.a.createElement("div",{className:"notification"},r.a.createElement(y.a,{bottom:!0},r.a.createElement("div",{className:"shadow"},r.a.createElement(p.a,{icon:d.e}),r.a.createElement("span",null,t))))},Oe=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).createPopUp=function(e){a.setState({popupContent:e})},a.clearPopUp=function(){a.setState({popupContent:""})},a.createNotification=function(e){a.setState({notificationMessage:e}),setTimeout((function(){a.setState({notificationMessage:""})}),3e3)},a.state={popupContent:""},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){document.title=this.props.title}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.notificationMessage?r.a.createElement(ye,{message:this.state.notificationMessage}):null,this.state.popupContent?r.a.createElement(be,{content:this.state.popupContent,close:function(){return e.clearPopUp()}}):null,r.a.createElement("div",{className:"fill shadow"},r.a.createElement("h1",null,"Admin"),r.a.createElement(ve,{store:this.props.store,createPopUp:this.createPopUp,createNotification:this.createNotification})))}}]),t}(n.Component),Ne=a(42),we=function(e){return{type:"SET_USER",user:e}},je=function(){return{type:"CLEAR_USER"}},Se=function(e){return r.a.createElement("div",{className:"row centered-margin"},r.a.createElement("span",{className:"input-label"},e.label),r.a.createElement("input",{value:e.value,onChange:e.onChange,type:e.type,name:e.label,placeholder:e.placeholder?e.placeholder:"Enter your ".concat(e.label),required:e.required}))},ke=function(e){var t=e.message,a=e.closeMe;return r.a.createElement("div",{className:"error-box"},r.a.createElement("div",{className:"icon"}),r.a.createElement("div",{className:"info"},r.a.createElement("p",null,t),r.a.createElement(p.a,{className:"close-tag",onClick:a,icon:d.v})))},Ie=function(e){var t=e.store,a=e.history,s=Object(n.useState)(""),l=Object(R.a)(s,2),o=l[0],c=l[1],u=Object(n.useState)(""),m=Object(R.a)(u,2),p=m[0],d=m[1],f=Object(n.useState)(""),h=Object(R.a)(f,2),g=h[0],E=h[1];return r.a.createElement("div",{className:"anim-movement centered"},r.a.createElement("form",{className:"anim-movement form centered h-centered-margin shadow",onSubmit:function(e){e.preventDefault(),ie(o,p).then((function(e){try{var n=e;localStorage.setItem("token",n);var r=i.a.decode(n);t.dispatch(we(r)),a.push("/")}catch(s){}})).catch((function(e){try{E(e.data)}catch(e){E("Internal Server Error")}}))}},r.a.createElement("h1",{className:"header h-centered-margin"},"LOGIN"),r.a.createElement(Ne.CSSTransitionGroup,{transitionName:"error-box",transitionAppear:!0,transitionAppearTimeout:200,transitionLeaveTimeout:200,transitionEnterTimeout:200},g?r.a.createElement(ke,{message:g,closeMe:function(){return E("")}}):null),r.a.createElement("div",{className:"input-fields h-centered-margin"},r.a.createElement(Se,{label:"Username",type:"text",value:o,onChange:function(e){var t=e.target.value;c(t)}}),r.a.createElement(Se,{label:"Password",type:"password",value:p,onChange:function(e){var t=e.target.value;d(t)}})),r.a.createElement("div",{className:"form-footer"},r.a.createElement("button",{className:"submit-button",type:"submit"},"Login In!"),r.a.createElement("a",{href:"/register"},"Don't have an account?"))))},Ce=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){document.title=this.props.title}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ie,{history:this.props.history,store:this.props.store}))}}]),t}(n.Component);function Pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function De(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pe(a,!0).forEach((function(t){Object(N.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Me=function(e){var t=e.store,a=e.history,s=Object(n.useState)({firstName:"",lastName:"",email:"",username:"",password:"",confirmPassword:"",address:"",postCode:""}),l=Object(R.a)(s,2),o=l[0],c=l[1],u=Object(n.useState)(""),m=Object(R.a)(u,2),p=m[0],d=m[1];return r.a.createElement("div",{className:"centered"},r.a.createElement("form",{className:"form centered h-centered-margin shadow",onSubmit:function(e){e.preventDefault(),ce(o).then((function(e){try{var n=e;localStorage.setItem("token",n);var r=i.a.decode(n);t.dispatch(we(r)),a.push("/")}catch(s){d("There was an unexpected error, Please try again.")}})).catch((function(e){console.log(e),d(e.data)}))}},r.a.createElement("h1",{className:"header h-centered-margin"},"REGISTER"),r.a.createElement(Ne.CSSTransitionGroup,{transitionName:"error-box",transitionAppear:!0,transitionAppearTimeout:200,transitionLeaveTimeout:200,transitionEnterTimeout:200},p?r.a.createElement(ke,{message:p,closeMe:function(){return d("")}}):null),r.a.createElement("div",{className:"input-fields h-centered-margin"},r.a.createElement("div",{className:"input-double"},r.a.createElement(Se,{label:"First Name",type:"text",value:o.firstName,onChange:function(e){var t=e.target.value;c(De({},o,{firstName:t}))}}),r.a.createElement(Se,{label:"Last Name",type:"text",value:o.lastName,onChange:function(e){var t=e.target.value;c(De({},o,{lastName:t}))}})),r.a.createElement(Se,{label:"Email Address",type:"text",value:o.email,onChange:function(e){var t=e.target.value;c(De({},o,{email:t}))}}),r.a.createElement(Se,{label:"Username",type:"text",value:o.username,onChange:function(e){var t=e.target.value;c(De({},o,{username:t}))}}),r.a.createElement("div",{className:"input-double"},r.a.createElement(Se,{label:"Password",type:"password",value:o.password,onChange:function(e){var t=e.target.value;c(De({},o,{password:t}))}}),r.a.createElement(Se,{label:"Confirm Password",placeholder:"Confirm your password",type:"password",value:o.confirmPassword,onChange:function(e){var t=e.target.value;c(De({},o,{confirmPassword:t}))}})),r.a.createElement("div",{className:"input-double"},r.a.createElement(Se,{label:"Address",type:"text",value:o.address,onChange:function(e){var t=e.target.value;c(De({},o,{address:t}))}}),r.a.createElement(Se,{label:"Post Code",type:"text",value:o.postCode,onChange:function(e){var t=e.target.value;c(De({},o,{postCode:t}))}}))),r.a.createElement("div",{className:"form-footer"},r.a.createElement("button",{className:"submit-button",type:"submit"},"Sign Up!"),r.a.createElement("a",{href:"/login"},"Already Have An Account?"))))},xe=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){document.title=this.props.title}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Me,{history:this.props.history,store:this.props.store}))}}]),t}(n.Component),Le=a(337);function Re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Re(a,!0).forEach((function(t){Object(N.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Re(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ae=function(){return r.a.createElement(y.a,{down:!0},r.a.createElement(p.a,{className:"reported-marker",icon:d.q}))},Fe=function(e){var t=e.store,a=e.history,s={description:"",type:"Noise Pollution",username:"",dateSubmitted:0,lat:"",lng:"",streetName:""},l=Object(n.useState)(s),o=Object(R.a)(l,2),c=o[0],i=o[1],u=Object(n.useState)(""),m=Object(R.a)(u,2),f=m[0],h=m[1],g=Object(n.useState)(!1),E=Object(R.a)(g,2),v=E[0],b=E[1],y=Object(n.useState)(0),O=Object(R.a)(y,2),N=O[0],w=O[1],j=Object(n.useState)([]),S=Object(R.a)(j,2),I=S[0],C=S[1],P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;h(e),setTimeout((function(){h("")}),t)},D=function(e){var t=e.coords.latitude,a=e.coords.longitude;C([t,a]),b(!1)};return r.a.createElement(r.a.Fragment,null,v?r.a.createElement("div",{className:"loading-blocked"},r.a.createElement("span",null,r.a.createElement(Le.a,{color:"inherit"}))):null,r.a.createElement("div",{className:"flex report-container"},r.a.createElement("div",{className:N?"report flex-no-grow anim-all-400":"report flex-grow anim-all-400"},r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),JSON.stringify(c)===JSON.stringify(s))P("please make changes...");else{var n=Te({},c,{username:t.getState().userReducer.user.username,dateSubmitted:Date.now()});k(n).then((function(){try{a.push("/issues")}catch(e){P("internal server error")}})).catch((function(e){P(e.data)}))}},className:"form shadow"},r.a.createElement("h1",{className:"header h-centered-margin"},"Report Issue"),r.a.createElement(Ne.CSSTransitionGroup,{transitionName:"error-box",transitionAppear:!0,transitionAppearTimeout:200,transitionLeaveTimeout:200,transitionEnterTimeout:200},f?r.a.createElement(ke,{message:f,closeMe:function(){return h("")}}):null),r.a.createElement("div",{className:"input-fields h-centered-margin"},0===N?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"section-header"},"Issue Details"),r.a.createElement("div",{className:"row"},r.a.createElement("span",{className:"input-label"},"Issue Description"),r.a.createElement("textarea",{required:!0,rows:"4",cols:"50",placeholder:"Please enter the issue description...",style:{marginTop:"2em"},value:c.description,onChange:function(e){var t=e.target.value;i(Te({},c,{description:t}))}})),r.a.createElement("div",{className:"row"},r.a.createElement("span",{className:"input-label"},"Issue Type"),r.a.createElement("select",{className:"input-select",value:c.type,onChange:function(e){var t=e.target.value;i(Te({},c,{type:t}))}},r.a.createElement("option",{value:"Noise pollution"},"Noise pollution"),r.a.createElement("option",{value:"Speeding"},"Speeding"),r.a.createElement("option",{value:"Pothole"},"Pothole"),r.a.createElement("option",{value:"Litter"},"Litter")),r.a.createElement(p.a,{className:"cust-drop-icon",icon:d.c})),r.a.createElement("div",{style:{marginTop:"2em"}},r.a.createElement("button",{className:"submit-button",onClick:function(e){if(e.preventDefault(),JSON.stringify(s)===JSON.stringify(c)||""===c.description)return P("please fill in the required fields..."),!1;!function(e){e&&e.preventDefault(),b(!0),L.getCurrentLocation(D)}(),w(1)}},"Next"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"section-header"},"Issue Location"),r.a.createElement("p",{className:"hint"},"** Click on the map to select the location of your issue or input the location manually."),r.a.createElement("div",{className:"input-double"},r.a.createElement(Se,{label:"Latitude",type:"text",value:c.lat,onChange:function(e){var t=e.target.value;i(Te({},c,{lat:Number(t)}))},required:!0}),r.a.createElement(Se,{label:"Longitude",type:"text",value:c.lng,onChange:function(e){var t=e.target.value;i(Te({},c,{lng:Number(t)}))},required:!0})),r.a.createElement(Se,{label:"Street Name (Optional)",type:"text",value:c.streetName,onChange:function(e){var t=e.target.value;i(Te({},c,{streetName:t}))},required:!1}),r.a.createElement("div",{style:{marginTop:"2em"}},r.a.createElement("button",{className:"submit-button w-fill",onClick:function(e){e.preventDefault(),w(0)}},"Back"),r.a.createElement("button",{className:"submit-button w-fill gap-top",type:"submit"},"Submit")))))),1===N&&I.length>0?r.a.createElement("div",{className:"map h-centered-margin fill gap-left shadow padding-20 anim-all-400"},r.a.createElement("div",{className:"frame"},r.a.createElement(ee,{onClick:function(e){var t=e.lat,a=e.lng;i(Te({},c,{lat:t,lng:a}))},singleMarker:c.lat&&c.lng?r.a.createElement(Ae,{lat:c.lat,lng:c.lng}):null,height:"100%",userLocation:I,zoom:9,hoverDistance:30}))):null))},Ue=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){document.title=this.props.title}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe,{history:this.props.history,store:this.props.store}))}}]),t}(n.Component);var _e=function(e){var t=e.store.getState().userReducer.user?e.store.getState().userReducer:{};return r.a.createElement("div",null,r.a.createElement(u.a,null,r.a.createElement("div",{className:"nav shadow"},r.a.createElement("div",{className:"fl-left h-centered-margin"},r.a.createElement(u.b,{className:"link",to:"/"},r.a.createElement(p.a,{icon:d.o}),"Home"),t.isAuth?r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{className:"link",to:"/issues"},"Issues"),r.a.createElement(u.b,{className:"link",to:"/issues/report"},"Report Issue")):null),r.a.createElement("div",{className:"fl-right"},t.isAuth?r.a.createElement(r.a.Fragment,null,r.a.createElement("em",{className:"welcome-message"},"Welcome, ",t.user.username),r.a.createElement(u.b,{className:"link",to:"/account"},r.a.createElement(p.a,{icon:d.t}),"Account"),t.user.isStaff?r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{className:"link",to:"/admin"},r.a.createElement(p.a,{icon:d.u}),"Admin")):null,r.a.createElement("button",{className:"link",onClick:function(){return e.store.dispatch(je()),void localStorage.removeItem("token")}},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{className:"link",to:"/register"},"Register"),r.a.createElement(u.b,{className:"link",to:"/login"},"Login")))),r.a.createElement("div",{className:"container h-centered-margin"},r.a.createElement(m.b,{exact:!0,path:"/",render:function(){return r.a.createElement(O,{userData:t,title:"Home"})}}),r.a.createElement(m.b,{exact:!0,path:"/register",render:function(a){return t.isAuth?r.a.createElement(m.a,{to:"/"}):r.a.createElement(xe,Object.assign({},a,{store:e.store,title:"Register"}))}}),r.a.createElement(m.b,{exact:!0,path:"/login",render:function(a){return t.isAuth?r.a.createElement(m.a,{to:"/"}):r.a.createElement(Ce,Object.assign({},a,{store:e.store,title:"Login"}))}}),r.a.createElement(m.b,{exact:!0,path:"/issues",render:function(a){return t.isAuth?r.a.createElement(re,Object.assign({},a,{store:e.store,title:"Issues"})):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/admin",render:function(a){return t.user.isStaff?r.a.createElement(Oe,Object.assign({},a,{store:e.store,title:"Admin"})):r.a.createElement(m.a,{to:"/"})}}),r.a.createElement(m.b,{exact:!0,path:"/issues/report",render:function(a){return t.isAuth?r.a.createElement(Ue,Object.assign({},a,{store:e.store,title:"Report Issue"})):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/account",render:function(e){return t.isAuth?r.a.createElement("h1",null,t.user.username,"'s Account"):r.a.createElement(m.a,{to:"/login"})}}))))};a(319),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ve={isAuth:!1,user:{}};function qe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Be(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qe(a,!0).forEach((function(t){Object(N.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ge={errMessage:"",notification:""},He=Object(o.a)({userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return{isAuth:!0,user:t.user};case"CLEAR_USER":return Ve;default:return e}},messageReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERROR":return Be({},e,{errMessage:t.message});case"SET_NOTIFICATION":return Be({},e,{notification:t.message});case"CLEAR_ERROR":return Be({},e,{errMessage:""});case"CLEAR_NOTIFICATION":return Be({},e,{notification:""});case"CLEAR_ALL":return Ge;default:return e}}}),Je=Object(o.b)(He,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());if(localStorage.token)try{var ze=i.a.verify(localStorage.token,"somekey");1e3*ze.exp<=Date.now()?(console.log("token has expired! please login"),localStorage.removeItem("token")):Je.dispatch(we(ze))}catch(We){console.log("token has been changed!"),localStorage.removeItem("token")}var Xe=function(){l.a.render(r.a.createElement(_e,{store:Je}),document.getElementById("root"))};Xe(),Je.subscribe(Xe),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},44:function(e,t,a){"use strict";var n=function(e){if(isNaN(e))throw new Error("value is not a number")};e.exports={validateDate:function(e){if(isNaN(e))throw new Error("invalid date type")},checkMissingData:function(e,t){var a=!0,n=!1,r=void 0;try{for(var s,l=t[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var o=s.value;if(!(o in e))throw new Error("".concat(o," missing"))}}catch(c){n=!0,r=c}finally{try{a||null==l.return||l.return()}finally{if(n)throw r}}},checkCorrectDataTypes:function(e,t){for(var a=0,n=Object.keys(e);a<n.length;a++){var r=n[a];if(typeof e[r]!==typeof t[r])throw new Error("".concat(r," has invalid data type"))}},checkUndefinedParams:function(e){for(var t=0,a=Object.keys(e);t<a.length;t++){var n=a[t];if(void 0===e[n]||null===e[n]||""===e[n])throw new Error("".concat(n," must not be blank"))}},validateTimestamp:function(e){if(n(e),e<0)throw new Error("timestamp cannot be negative");if(e>Date.now()+86400)throw new Error("timestamp is too far in the future")},validateNumber:n}}},[[160,1,2]]]);
//# sourceMappingURL=main.c10b29a5.chunk.js.map